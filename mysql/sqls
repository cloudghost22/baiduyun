CREATE TABLE `users` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `uk` decimal(12,0) DEFAULT NULL,
  `userName` varchar(255) DEFAULT NULL,
  `followCount` int(11) DEFAULT NULL,
  `fansCount` int(11) DEFAULT NULL,
  `pubshareCount` int(11) DEFAULT NULL,
  `shareFlag` tinyint(4) DEFAULT '0',
  `followFlag` tinyint(4) DEFAULT '0',
  `fansFlag` tinyint(4) DEFAULT '0',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

ALTER table users add INDEX idx_uk(uk);
ALTER table users add INDEX idx_sharecount(pubsharecount);
ALTER table users add INDEX idx_fanscount(fanscount);
ALTER table users add INDEX idx_followcount(followcount);

CREATE TABLE `share` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `category` tinyint(4) DEFAULT NULL,
  `feed_time` decimal(13,0) DEFAULT NULL,
  `isdir` tinyint(4) DEFAULT NULL,
  `server_filename` varchar(1024) DEFAULT NULL,
  `size` decimal(10,0) unsigned DEFAULT NULL,
  `saveTime` decimal(13,0) DEFAULT NULL,
  `shareid` decimal(18,0) DEFAULT NULL,
  `shorturl` char(8) DEFAULT NULL,
  `title` varchar(1024) DEFAULT NULL,
  `uk` decimal(12,0) DEFAULT NULL,
  `username` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `errorurls` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `url` varchar(512) DEFAULT NULL,
  `flag` tinyint(4) DEFAULT '0',
  `timeStamp` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `album` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `url` varchar(512) DEFAULT NULL,
  `flag` tinyint(4) DEFAULT '0',
  `timeStamp` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `share_update` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `category` tinyint(4) DEFAULT NULL,
  `feed_time` decimal(13,0) DEFAULT NULL,
  `isdir` tinyint(4) DEFAULT NULL,
  `server_filename` varchar(1024) DEFAULT NULL,
  `size` decimal(10,0) unsigned DEFAULT NULL,
  `saveTime` decimal(13,0) DEFAULT NULL,
  `shareid` decimal(18,0) DEFAULT NULL,
  `shorturl` char(8) DEFAULT NULL,
  `title` varchar(1024) DEFAULT NULL,
  `uk` decimal(12,0) DEFAULT NULL,
  `username` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=INNODB DEFAULT CHARSET=utf8;

CREATE TABLE `users_update` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `uk` decimal(12,0) DEFAULT NULL,
  `updateNumber` int(11) DEFAULT NULL,
  `totalCount` int(11) DEFAULT NULL,
  `updateTime` timestamp NULL DEFAULT NULL COMMENT 'CURRENT_TIMESTAMP',
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `users_new` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `uk` decimal(12,0) DEFAULT NULL,
  `userName` varchar(255) DEFAULT NULL,
  `followCount` int(11) DEFAULT NULL,
  `fansCount` int(11) DEFAULT NULL,
  `pubshareCount` int(11) DEFAULT NULL,
  `shareFlag` tinyint(4) DEFAULT '0',
  `followFlag` tinyint(4) DEFAULT '0',
  `fansFlag` tinyint(4) DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `idx_sharecount` (`pubshareCount`),
  KEY `idx_uk` (`uk`),
  KEY `idx_fanscount` (`fansCount`),
  KEY `idx_followcount` (`followCount`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;



ALTER TABLE share ADD FULLTEXT INDEX ft_index (title) WITH PARSER ngram;

CREATE  VIEW `v_fetcheduser` AS select `users`.`uk` AS `uk` from `users` where (`users`.`shareFlag` = 1);

CREATE  VIEW `v_fanseduser` AS select `users`.`uk` AS `uk` from `users` where (`users`.`fansFlag` = 1);

CREATE  VIEW `v_followeduser` AS select `users`.`uk` AS `uk` from `users` where (`users`.`followFlag` = 1);
